# 원시 & 객체 타입

자바스크립트의 데이터 타입은 '원시 타입'과 '객체 타입'으로 바꿀 수 있다고 했다.
이때 원시 타입의 값은 변경 불가능한 값, 객체 타입의 값은 변경 가능한 값이 된다.

## 원시 값

원시 타입의 데이터는 아래와 같은 속성을 공유한다.

- 불변성  
   원시 값은 한번 생성된 이후 변경할 수 없다. (읽기 전용이 됨) 이것은 단순히 변수가 불변하다는 것이 아니라, **값에 대한 진술이 변경 불가능하다는 말이다.**

  ```js
  let foo = "bar"; // 자바스크립트의 문자열은 원시 타입이다.

  foo = 300; // 숫자 역시 원시 타입이다.

  // 값을 재할당하면 원래 할당된 "foo"가 숫자 타입 300으로 변하는 것이 아니다.
  // 재할당이 일어날 경우, 새로운 메모리 공간을 확보한 후 300을 저장한다.
  // 그 이후 'foo'라는 식별자가 참조하던 메모리 공간의 주소를 바꾸게 된다.
  ```

  값의 이러한 특성을 **불변성**이라고 한다. 이 불변성을 가지는 원시 값이 할당된 변수는 재할당 외에는 값을 변경할 수 있는 방법이 없다.

- 값에 의한 전달  
   변수에 변수를 할당했을 때 "무엇이 전달되는가?" 를 생각해 보면 쉽다.

  ```js
  let foo = 100;
  let bar = foo;

  console.log(foo, bar); // 100 100

  foo = 80;

  console.log(foo, bar); // 80 100
  ```

  bar에 foo를 할당한 후에, foo의 값을 변경하였다. 그럼에도 불구하고 bar의 값은 100으로 변하지 않는다.  
   이는 두 식별자에 할당된 값들이 다른 메모리 공간에 저장된 별개의 값이기 때문이다. 변수에 원시 값을 갖는 변수를 할당하면, 변수 안의 값을 복사하여 전달한다. 이것을 "값에 의한 전달"이라고 한다.  
   (값에 의한 전달도 사실 메모리 주소를 전달하는 것이니, 오해하지는 말길 바란다.)

## 객체

- 변경 가능한 값  
  객체는 메모리를 효울적으로 사용하기 위해, 그리고 객체를 복사하는 비용을 절약하기 위해 "변경 가능한 값"으로 설계되어 있다.

  ```js
  const foo = {
  	name: "bar",
  	from: "korea",
  };

  foo.name = "kim";

  console.log(foo.name); // "kim";

  // 객체는 변경 가능한 값이다. 상수로 선언하였어도 얼마든지 내부 프로퍼티가 바뀌는 것을 볼 수 있다.
  ```

  "변경 가능"이라는 특성 때문에, 대할당 없이 프로퍼티를 동적으로 추가하고, 갱신하고, 삭제하는 등의 동작이 자유롭다.  
  다만 이것이 항상 좋은 것은 아닌 게, 여러 개의 식별자가 하나의 객체를 공유할 수 있다는 단점이 존재하기 때문이다.

- 참조에 의한 전달

  ```js
  let foo = {
  	name: "kim",
  };

  let bar = foo;

  console.log(foo, bar); // {name: "kim"} {name: "kim"}

  foo.name = "moon";

  console.log(foo, bar); // {name: "moon"} {name: "moon"}
  ```

  원시 타입과 달리 두 개의 식별자가 하나의 객체를 공유하고 있는 것을 알 수 있다. 이것은 객체를 복사할 경우, 원본의 '참조 값'이 전달되기 때문이다.

---

## 값, 참조 값

값에 의한 전달, 참조에 의한 전달은 식별자가 기억하는 메모리 공간에 저장된 값을 복사해 전달한다는 면에서는 동일하다. 다만, 식별자가 기억하는 메모리 공간의 값이 원시 값이냐 참조 값이냐의 차이만 존재할 뿐이다.  
따라서 자바스크립트에는 오로지 "값에 의한 전달"만이 존재한다고도 할 수 있다. (이를 혹자는 "공유에 의한 전달만이 존재한다" 라고 하기도 한다.)
